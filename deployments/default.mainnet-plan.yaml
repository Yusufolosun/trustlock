---
# TrustLock Mainnet Deployment Plan
# Deploy order: traits → escrow → factory (dependency chain)
#
# CRITICAL CHECKLIST before running this plan:
#   [ ] All tests passing: npm test
#   [ ] Clarinet check passes: clarinet check
#   [ ] Security audit completed and reviewed
#   [ ] Testnet deployment verified and tested
#   [ ] Deployer wallet funded with >= 1 STX (contracts + fees)
#   [ ] Emergency pause mechanism tested on testnet
#   [ ] Deployment keys backed up securely
#
# Run: clarinet deployments apply -p deployments/default.mainnet-plan.yaml

id: 0
name: Mainnet deployment for TrustLock escrow contracts
network: mainnet
stacks-node: "https://api.mainnet.hiro.so"

plan:
  batches:
    # Batch 0: Deploy all contracts (traits → escrow → factory dependency chain)
    - id: 0
      transactions:
        - contract-publish:
            contract-name: trustlock-traits
            expected-sender: $DEPLOYER
            cost: 10000
            path: contracts/trustlock-traits.clar
            anchor-block-only: true
            clarity-version: 2
        - contract-publish:
            contract-name: trustlock-escrow
            expected-sender: $DEPLOYER
            cost: 25000
            path: contracts/trustlock-escrow.clar
            anchor-block-only: true
            clarity-version: 2
        - contract-publish:
            contract-name: trustlock-factory
            expected-sender: $DEPLOYER
            cost: 20000
            path: contracts/trustlock-factory.clar
            anchor-block-only: true
            clarity-version: 2
      epoch: "2.4"
